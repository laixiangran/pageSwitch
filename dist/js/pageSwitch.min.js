!function(e,n){var a=e.COM;if(!a)throw"没有引入commonJS！";var t={container:"container",pages:"page",easing:"ease",duration:1e3,pagination:!1,loop:!1,keyboard:!1,direction:"vertical",pageSwitchComplete:function(e){}},o=function(e){this.options=a.$O.extend(t,e||{}),this.infos={name:"pageSwitch",version:"1.0",author:"laixiangran@163.com"},this.pageIndex=0,this.container=null,this.pages=[],this.paging=null,this.canScroll=!0,this.offset=0,this.init()};o.prototype={init:function(){var n=this;if(n.container=a.$D.byId(n.options.container),n.pages=a.$D.byClassName(n.options.pages,n.container),a.$D.addClass(n.container,"ps-container"),a.$D.addClass(n.pages[n.pageIndex],"ps-active"),n.options.pagination){var t='<ul class="ps-paging">';a.$A.forEach(n.pages,function(e,n){t+="<li></li>"}),t+="</ul>",n.paging=a.$D.append(document.body,t),a.$D.addClass(n.paging.childNodes[n.pageIndex],"paging-active"),a.$A.forEach(n.paging.childNodes,function(e,t){a.$E.addEvent(e,"click",function(e){n.pageIndex=t,n.scrollPage()})})}"horizontal"==n.options.direction?(n.paging?a.$D.addClass(n.paging,"ps-paging-h"):a.$O.noop(),a.$D.addClass(n.container,["ps-h-container"]),a.$D.setStyle(n.container,{width:100*n.pages.length+"%","float":"left"}),a.$A.forEach(n.pages,function(e){a.$D.addClass(e,["ps-page","ps-h-page"]),a.$D.setStyle(e,{width:100/n.pages.length+"%","float":"left"})})):(n.paging?a.$D.addClass(n.paging,"ps-paging-v"):a.$O.noop(),a.$A.forEach(n.pages,function(e){a.$D.addClass(e,["ps-page","ps-v-page"])}));var o=a.$B.browser.firefox?"DOMMouseScroll":"mousewheel";a.$E.addEvent(document,o,function(e){if(a.$E.preventDefault(e),n.canScroll){var t=a.$E.getWheelDelta(e);0>t?n.movePageDown():n.movePageUp()}}),n.options.keyboard&&a.$E.addEvent(document,"keydown",function(e){var a=e.keyCode;37==a||38==a?n.movePageUp():(39==a||40==a)&&n.movePageDown()}),a.$E.addEvent(e,"resize",function(){n.scrollPage()})},movePageUp:function(){var e=this.options,n=this.pages,t=this.pageIndex>0||e.loop;this.pageIndex?this.pageIndex--:e.loop&&(this.pageIndex=n.length-1),t?this.scrollPage():a.$O.noop()},movePageDown:function(){var e=this.options,n=this.pages,t=this.pageIndex<n.length-1||e.loop;this.pageIndex<n.length-1?this.pageIndex++:e.loop&&(this.pageIndex=0),t?this.scrollPage():a.$O.noop()},scrollPage:function(){var e=a.$D.getRect(this.pages[this.pageIndex]);e&&this.initEffects(e)},initEffects:function(e){var n=this;n.canScroll=!1;var t=n.options,o=n.container,i="";"horizontal"==t.direction?(0!=n.pageIndex?n.offset-=e.left:n.offset=0,i=n.offset+"px, 0px, 0px"):(0!=n.pageIndex?n.offset-=e.top:n.offset=0,i="0px, "+n.offset+"px, 0px"),a.$D.setStyle(o,{transition:"all "+t.duration+"ms "+t.easing,transform:"translate3d("+i+")"}),a.$A.forEach(n.pages,function(e,t){n.pageIndex==t?a.$D.addClass(e,"ps-active"):a.$D.removeClass(e,"ps-active")}),a.$E.addEvent(o,"transitionend",function(){n.canScroll=!0,t.pageSwitchComplete(n.pageIndex)}),n.paging&&a.$A.forEach(n.paging.childNodes,function(e,t){n.pageIndex==t?a.$D.addClass(e,"paging-active"):a.$D.removeClass(e,"paging-active")})}};var i=!1;"function"==typeof e.jQuery&&(e.$.fn.pageSwitch=o,i=!0),"function"==typeof define&&define.amd&&(define(function(){return o}),i=!0),"undefined"!=typeof module&&module.exports&&(module.exports=o,i=!0),i||(e.pageSwitch=o)}(window);