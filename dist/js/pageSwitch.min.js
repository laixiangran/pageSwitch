!function(e,a){var n=e.COM;if(!n)throw"没有引入commonJS！";var t={container:"container",pages:"page",easing:"ease",duration:1e3,pagination:!1,loop:!1,keyboard:!1,direction:"vertical",pageSwitchComplete:function(e){}},o=e.pageSwitch=function(e){this.options=n.$O.extend(t,e||{}),this.infos={name:"pageSwitch",version:"1.0",author:"laixiangran@163.com"},this.pageIndex=0,this.container=null,this.pages=[],this.paging=null,this.canScroll=!0,this.offset=0,this.init()};o.prototype={init:function(){var a=this;if(a.container=n.$D.byId(a.options.container),a.pages=n.$D.byClassName(a.options.pages,a.container),n.$D.addClass(a.container,"ps-container"),n.$D.addClass(a.pages[a.pageIndex],"ps-active"),a.options.pagination){var t='<ul class="ps-paging">';n.$A.forEach(a.pages,function(e,a){t+="<li></li>"}),t+="</ul>",a.paging=n.$D.append(document.body,t),n.$D.addClass(a.paging.childNodes[a.pageIndex],"paging-active"),n.$A.forEach(a.paging.childNodes,function(e,t){n.$E.addEvent(e,"click",function(e){a.pageIndex=t,a.scrollPage()})})}"horizontal"==a.options.direction?(a.paging?n.$D.addClass(a.paging,"ps-paging-h"):n.$O.noop(),n.$D.addClass(a.container,["ps-h-container"]),n.$D.setStyle(a.container,{width:100*a.pages.length+"%","float":"left"}),n.$A.forEach(a.pages,function(e){n.$D.addClass(e,["ps-page","ps-h-page"]),n.$D.setStyle(e,{width:100/a.pages.length+"%","float":"left"})})):(a.paging?n.$D.addClass(a.paging,"ps-paging-v"):n.$O.noop(),n.$A.forEach(a.pages,function(e){n.$D.addClass(e,["ps-page","ps-v-page"])}));var o=n.$B.browser.firefox?"DOMMouseScroll":"mousewheel";n.$E.addEvent(document,o,function(e){if(n.$E.preventDefault(e),a.canScroll){var t=n.$E.getWheelDelta(e);0>t?a.movePageDown():a.movePageUp()}}),a.options.keyboard&&n.$E.addEvent(document,"keydown",function(e){var n=e.keyCode;37==n||38==n?a.movePageUp():(39==n||40==n)&&a.movePageDown()}),n.$E.addEvent(e,"resize",function(){a.scrollPage()})},movePageUp:function(){var e=this.options,a=this.pages,t=this.pageIndex>0||e.loop;this.pageIndex?this.pageIndex--:e.loop&&(this.pageIndex=a.length-1),t?this.scrollPage():n.$O.noop()},movePageDown:function(){var e=this.options,a=this.pages,t=this.pageIndex<a.length-1||e.loop;this.pageIndex<a.length-1?this.pageIndex++:e.loop&&(this.pageIndex=0),t?this.scrollPage():n.$O.noop()},scrollPage:function(){var e=n.$D.getRect(this.pages[this.pageIndex]);e&&this.initEffects(e)},initEffects:function(e){var a=this;a.canScroll=!1;var t=a.options,o=a.container,i="";"horizontal"==t.direction?(0!=a.pageIndex?a.offset-=e.left:a.offset=0,i=a.offset+"px, 0px, 0px"):(0!=a.pageIndex?a.offset-=e.top:a.offset=0,i="0px, "+a.offset+"px, 0px"),n.$D.setStyle(o,{transition:"all "+t.duration+"ms "+t.easing,transform:"translate3d("+i+")"}),n.$A.forEach(a.pages,function(e,t){a.pageIndex==t?n.$D.addClass(e,"ps-active"):n.$D.removeClass(e,"ps-active")}),n.$E.addEvent(o,"transitionend",function(){a.canScroll=!0,t.pageSwitchComplete(a.pageIndex)}),a.paging&&n.$A.forEach(a.paging.childNodes,function(e,t){a.pageIndex==t?n.$D.addClass(e,"paging-active"):n.$D.removeClass(e,"paging-active")})}}}(window);